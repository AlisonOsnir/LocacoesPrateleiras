<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<html lang="pt-br">

<head>
  <title>Locações e Registros PTH</title>
  <link rel="stylesheet" href="reset.css">
  <link rel="stylesheet" href="style.css">
  <script src="object.js"></script>
  <script src="script.js"></script>

</head>

<body>
  <main>

    <h1>locações pth</h1>
    <canvas class="backgrounding" width="940" height="529">
      your browser does not support HTML5 Canvas.
    </canvas>

    <p class="help-line">Selecione a locação e prencha o formulario!</p>

    <form id="formulario">
      <label for="floc" id="labelloc">Locação</label>
      <input type="text" id="floc" name="floc" required>
      <input type="text" id="flocname" name="flocname" readOnly=true onClick="alert('Selecione uma locação acima!')"
        required>

      <label for="fprod" id="labelcod">Cod. produto</label>
      <input type="text" id="fprod" name="fprod" style='text-transform:uppercase'>

      <fieldset>
        <legend id="labelstatus">status do material</legend>
        <label for="radio-liberado"><input type="radio" class="radio" name="status" value="liberado" id="radio-liberado">
          liberado</label>
        <label for="radio-producao"><input type="radio" class="radio"name="status" value="producao" id="radio-producao">
          produção</label>
        <label for="radio-parado"><input type="radio" class="radio"name="status" value="parado" id="radio-parado"> parado</label>
      </fieldset>

        <input type="submit" id="salvar" value="Salvar">


      <p>*Para remover salve sem cod. produto e status.</p>
    </form>
  </main>
</body>

</html>

<script>
  const areasAB = 26;
  const keyList = Object.keys(locacoesObj);
  const indicesArmazenados = [];

  screen.orientation.lock("landscape");

  //CANVAS
  var canvas = document.querySelector("canvas");
  var ctx = canvas.getContext("2d");

  var canvas2 = document.createElement('canvas')
  canvas2.setAttribute("width", "940");
  canvas2.setAttribute("height", "529");
  var ctx2 = canvas2.getContext('2d');

  var background = new Image();
  background.src = "estantes.png";

  background.onload = function () {
    ctx.drawImage(background, 0, 0);
    ctx.drawImage(canvas2, 0, 0,);
  }

//BOTAO PRATELEIRAS
  ctx2.fillStyle = "rgba(200, 200, 200, 0.35)";
  ctx2.fillRect(86, 22, 74, 36);
  ctx2.fillRect(258, 22, 74, 36);
  ctx2.fillRect(431, 22, 74, 36);
  ctx2.fillRect(601, 22, 74, 36);
  ctx2.fillRect(774, 22, 74, 36);
  ctx2.strokeStyle = "grey";
  ctx2.strokeRect(86, 22, 74, 36);
  ctx2.strokeRect(258, 22, 74, 36);
  ctx2.strokeRect(431, 22, 74, 36);
  ctx2.strokeRect(601, 22, 74, 36);
  ctx2.strokeRect(774, 22, 74, 36);
  
  //INPUT_EVENTO FORMULÁRIO
  let form = document.getElementById("formulario");
  let floc = document.getElementById("floc");
  let flocname = document.getElementById("flocname");
  let fprod = document.getElementById("fprod");
  let fstatus = undefined;

  form.addEventListener('submit', function (event) {
    event.preventDefault()
    statusRadioValue();
    locacoesObj[indexObj]["produto"] = fprod.value.toUpperCase();
    locacoesObj[indexObj]["status"] = fstatus;

    let objArmazenado = JSON.stringify(locacoesObj[indexObj]);
    localStorage.setItem(indexObj, objArmazenado);
    window.location.reload();
    window.scrollTo(0, 0)
  });

  varreduraIndispStorage()
  canvas.onclick = selecionaArea;

</script>