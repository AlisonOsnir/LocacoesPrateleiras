<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<html lang="pt-br">

<head>
  <title>Locações PTH</title>
  <link rel="stylesheet" href="reset.css">
  <link rel="stylesheet" href="style.css">
  <script src="function.js"></script>
  <script src="locacoesobj.js"></script>

</head>

<body>
  <main>
    <h1 class="tituloPrincipal">LOCAÇÕES PTH</h1>

    <canvas class="backgroundimg" width="940" height="529">
      your browser does not support HTML5 Canvas.
    </canvas>

    <form id="formulario">
      <label for="floc" id="labelloc">Locação</label>
      <input type="text" id="floc" name="floc">

      <label for="fprod" id="labelcod">Cod. produto</label>
      <input type="text" id="fprod" name="fprod">

      <p>status do material</p>
      <div class="radio">
        <input type="radio" id="fstatus" name="fstatus" value="Liberado">
        <label for="Liberado">Liberado</label><br>

        <input type="radio" id="fstatus" name="fstatus" value="Produção">
        <label for="Produção" id=>Produção</label><br>

        <input type="radio" id="fstatus" name="fstatus" value="Parado">
        <label for="Parado">Parado</label><br><br>
      </div>

      <input type="submit" id="enviar" value="enviar">

    </form>

  </main>
</body>

</html>

<script>

  //CANVAS
  var canvas = document.querySelector("canvas");
  var ctx = canvas.getContext("2d");

  var canvas2 = document.createElement('canvas')
  canvas2.setAttribute("width", "940");
  canvas2.setAttribute("height", "529");
  var ctx2 = canvas2.getContext('2d');

  var background = new Image();
  background.src = "estantes.png";

  background.onload = function () {
    ctx.drawImage(background, 0, 0);
    ctx.drawImage(canvas2, 0, 0,);
  }

  //TESTE INPUT
  let form = document.getElementById('formulario');
  let floc = document.getElementById("floc");
  let fprod = document.getElementById("fprod");
  let fstatus = document.getElementById("fstatus");

  form.addEventListener('submit', function (e) {
    e.preventDefault()
    locacoesObj[68]["nome"] = floc.value;
    locacoesObj[68]["produto"] = fprod.value;
    locacoesObj[68]["status"] = fstatus.value;
    
    if (locacoesObj[68]["status"]){
      locacoesObj[68]["disp"] = false;
      
    }
  });
  

  //desnecessario com formulario funcionando
  function tornaIndisp(x, y, w, h, objeto, produto) {
    if (objeto["disp"] == true) {
      ctx.fillStyle = 'rgba(255, 255, 0)';
      ctx.fillRect(x, y, w, h);
      ctx.font = 'bold 13px calibri, sans-serif';
      ctx.fillStyle = 'black';
      ctx.fillText(produto, x + 9, y + h * 0.5);
    }
  }

  //VARIAVEIS E CHAMADAS
  const areasAB = 26;
  const keyList = Object.keys(locacoesObj);

  varreduraDisp()
  canvas.onclick = selecionaArea;


</script>